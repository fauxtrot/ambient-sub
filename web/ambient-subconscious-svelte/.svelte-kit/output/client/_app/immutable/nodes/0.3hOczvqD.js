import{a as o,f as D,s as h,d as Fe,c as ue,t as pe}from"../chunks/Dcw-4Js5.js";import{o as rs}from"../chunks/gUtJ7mXj.js";import{F as vs,H as os,p as he,t as H,m as me,n as e,s as t,o as s,g as r,a9 as A,a as ls,T as _e,k as K,a8 as cs,aa as fe}from"../chunks/ocTC9fog.js";import{B as ds,s as je,a as b,i as T}from"../chunks/CeYpcBse.js";import{s as Q,i as us,a as Ee,c as Oe,b as ze,d as ps,e as ge,I as W,t as Ae,f as _s,g as fs,r as gs,h as hs,j as ms,k as js,l as bs,m as $s,n as xs,o as Cs,p as Ds,q as Ms,u as Ss,v as ws,w as Is,x as ks}from"../chunks/RXd-l4Mu.js";function qs(y,I,...a){var i=new ds(y);vs(()=>{const m=I()??null;i.ensure(m,m&&(u=>m(u,...a)))},os)}var Ts=D('<div><span></span> <span class="text svelte-12nqn7t"> </span></div>');function ys(y,I){he(I,!0);const a=()=>b(us,"$isConnecting",l),i=()=>b(Ee,"$isConnected",l),m=()=>b(Oe,"$currentDevice",l),u=()=>b(ze,"$currentConfig",l),$=()=>b(ps,"$currentSession",l),[l,P]=je();let p=A(()=>{var c,v;return a()?"Connecting...":i()?m()?(c=u())!=null&&c.isPaused?"Paused":(v=u())!=null&&v.isMuted?"Muted":$()?"Recording":m().status==="online"?"Online":"Offline":"No Device":"Disconnected"}),F=A(()=>{var c,v,S;return a()?"connecting":i()?(c=u())!=null&&c.isPaused?"paused":(v=u())!=null&&v.isMuted?"muted":$()?"recording":((S=m())==null?void 0:S.status)==="online"?"online":"offline":"disconnected"}),E=A(()=>{var c,v;return $()!==null&&!((c=u())!=null&&c.isPaused)&&!((v=u())!=null&&v.isMuted)});var M=Ts(),O=e(M);let z;var k=t(O,2),q=e(k,!0);s(k),s(M),H(()=>{Q(M,1,`status-badge ${r(F)??""}`,"svelte-12nqn7t"),z=Q(O,1,"indicator svelte-12nqn7t",null,z,{pulse:r(E)}),h(q,r(p))}),o(y,M),me(),P()}var Ps=D('<div class="status-section svelte-vej631"><p class="disconnected svelte-vej631">Disconnected from SpacetimeDB</p></div>'),As=D('<div class="status-section svelte-vej631"><p class="no-device svelte-vej631">No capture device registered</p> <span class="hint svelte-vej631">Start the capture client to see device info</span></div>'),Fs=D("<option> </option>"),Es=D('<section class="config-section svelte-vej631"><h3 class="svelte-vej631">Audio Input</h3> <select class="select"><option>System Default</option><!></select></section>'),Os=D('<section class="config-section svelte-vej631"><h3 class="svelte-vej631">Advanced Settings</h3> <div class="settings-grid svelte-vej631"><div class="setting-item svelte-vej631"><span class="setting-label svelte-vej631">Min Speech</span> <span class="setting-value svelte-vej631"> </span></div> <div class="setting-item svelte-vej631"><span class="setting-label svelte-vej631">Max Speech</span> <span class="setting-value svelte-vej631"> </span></div> <div class="setting-item svelte-vej631"><span class="setting-label svelte-vej631">Silence Duration</span> <span class="setting-value svelte-vej631"> </span></div> <div class="setting-item svelte-vej631"><span class="setting-label svelte-vej631">Language</span> <span class="setting-value svelte-vej631"> </span></div></div></section>'),zs=D('<section class="config-section svelte-vej631"><h3 class="svelte-vej631">Device</h3> <div class="device-info svelte-vej631"><div class="device-name svelte-vej631"> </div> <div class="device-meta svelte-vej631"><span class="platform"> </span> <span> </span></div></div></section> <!> <section class="config-section svelte-vej631"><h3 class="svelte-vej631">Silence Threshold</h3> <div class="slider-container svelte-vej631"><input type="range" class="slider svelte-vej631" min="0.001" max="0.1" step="0.001"/> <span class="slider-value svelte-vej631"> </span></div> <p class="config-hint svelte-vej631">Lower = more sensitive (picks up quieter sounds)</p></section> <section class="config-section svelte-vej631"><h3 class="svelte-vej631">Capture Controls</h3> <div class="control-buttons svelte-vej631"><button><!> </button> <button><!> </button></div> <p class="config-hint svelte-vej631"><!></p></section> <!>',1),Rs=D('<div class="drawer-backdrop svelte-vej631"></div> <aside class="config-drawer svelte-vej631"><header class="drawer-header svelte-vej631"><h2 class="svelte-vej631">Configuration</h2> <button class="btn btn-ghost btn-icon" aria-label="Close drawer"><!></button></header> <div class="drawer-content svelte-vej631"><!></div></aside>',1);function Bs(y,I){he(I,!0);const a=()=>b(ze,"$currentConfig",l),i=()=>b(Oe,"$currentDevice",l),m=()=>b(ge,"$drawerOpen",l),u=()=>b(Ee,"$isConnected",l),$=()=>b(ms,"$inputsForDevice",l),[l,P]=je();let p=cs(.01);ls(()=>{a()&&_e(p,a().silenceThreshold,!0)});function F(){ge.set(!1)}function E(d){const R=d.target;_e(p,parseFloat(R.value),!0)}function M(){i()&&js(i().id,r(p))}function O(d){const R=d.target;i()&&Ss(i().id,parseInt(R.value,10))}function z(){i()&&a()&&bs(i().id,!a().isPaused)}function k(){i()&&a()&&$s(i().id,!a().isMuted)}let q=A(()=>{var d;return((d=a())==null?void 0:d.isPaused)??!1}),c=A(()=>{var d;return((d=a())==null?void 0:d.isMuted)??!1});var v=ue(),S=K(v);{var ee=d=>{var R=Rs(),se=K(R);se.__click=F;var te=t(se,2),ae=e(te),ne=t(e(ae),2);ne.__click=F;var Re=e(ne);W(Re,{name:"close",size:20}),s(ne),s(ae);var be=t(ae,2),Be=e(be);{var Ne=B=>{var X=Ps();o(B,X)},Le=B=>{var X=ue(),He=K(X);{var Ue=N=>{var Y=As();o(N,Y)},Ve=N=>{var Y=zs(),ie=K(Y),$e=t(e(ie),2),re=e($e),Ge=e(re,!0);s(re);var xe=t(re,2),ve=e(xe),Je=e(ve,!0);s(ve);var oe=t(ve,2);let Ce;var Ke=e(oe,!0);s(oe),s(xe),s($e),s(ie);var De=t(ie,2);{var Qe=n=>{var _=Es(),f=t(e(_),2);f.__change=O;var w=e(f);w.value=w.__value=-1;var L=t(w);xs(L,1,$,Cs,(g,x)=>{var C=Fs(),G=e(C);s(C);var J={};H(()=>{h(G,`${r(x).name??""}
                  ${r(x).isDefault?" (Default)":""}`),J!==(J=r(x).inputIndex)&&(C.value=(C.__value=r(x).inputIndex)??"")}),o(g,C)}),s(f);var j;Ds(f),s(_),H(()=>{var g,x,C;j!==(j=((g=a())==null?void 0:g.selectedAudioInputIndex)??-1)&&(f.value=(f.__value=((x=a())==null?void 0:x.selectedAudioInputIndex)??-1)??"",Ms(f,((C=a())==null?void 0:C.selectedAudioInputIndex)??-1))}),o(n,_)};T(De,n=>{$().length>0&&n(Qe)})}var le=t(De,2),Me=t(e(le),2),U=e(Me);gs(U),U.__input=E,U.__change=M;var Se=t(U,2),We=e(Se,!0);s(Se),s(Me),fe(2),s(le);var ce=t(le,2),de=t(e(ce),2),V=e(de);let we;V.__click=z;var Ie=e(V);{let n=A(()=>r(q)?"play":"pause");W(Ie,{get name(){return r(n)},size:18})}var Xe=t(Ie);s(V);var Z=t(V,2);let ke;Z.__click=k;var qe=e(Z);{let n=A(()=>r(c)?"volume":"volume-off");W(qe,{get name(){return r(n)},size:18})}var Ye=t(qe);s(Z),s(de);var Te=t(de,2),Ze=e(Te);{var es=n=>{var _=pe("Capture is paused - audio is not being recorded");o(n,_)},ss=n=>{var _=ue(),f=K(_);{var w=j=>{var g=pe("Capture is muted - audio recorded but not transcribed");o(j,g)},L=j=>{var g=pe("Capture active - recording and transcribing");o(j,g)};T(f,j=>{r(c)?j(w):j(L,!1)},!0)}o(n,_)};T(Ze,n=>{r(q)?n(es):n(ss,!1)})}s(Te),s(ce);var ts=t(ce,2);{var as=n=>{var _=Os(),f=t(e(_),2),w=e(f),L=t(e(w),2),j=e(L);s(L),s(w);var g=t(w,2),x=t(e(g),2),C=e(x);s(x),s(g);var G=t(g,2),J=t(e(G),2),ns=e(J);s(J),s(G);var ye=t(G,2),Pe=t(e(ye),2),is=e(Pe,!0);s(Pe),s(ye),s(f),s(_),H(()=>{h(j,`${a().minSpeechDurationMs??""}ms`),h(C,`${a().maxSpeechDurationMs??""}ms`),h(ns,`${a().silenceDurationMs??""}ms`),h(is,a().language)}),o(n,_)};T(ts,n=>{a()&&n(as)})}H(n=>{h(Ge,i().name),h(Je,i().platform),Ce=Q(oe,1,"status-indicator svelte-vej631",null,Ce,{online:i().status==="online"}),h(Ke,i().status),h(We,n),we=Q(V,1,"btn control-btn svelte-vej631",null,we,{active:r(q)}),h(Xe,` ${r(q)?"Resume":"Pause"}`),ke=Q(Z,1,"btn control-btn svelte-vej631",null,ke,{active:r(c)}),h(Ye,` ${r(c)?"Unmute":"Mute"}`)},[()=>r(p).toFixed(3)]),hs(U,()=>r(p),n=>_e(p,n)),o(N,Y)};T(He,N=>{i()?N(Ve,!1):N(Ue)},!0)}o(B,X)};T(Be,B=>{u()?B(Le,!1):B(Ne)})}s(be),s(te),Ae(3,se,()=>_s,()=>({duration:200})),Ae(3,te,()=>fs,()=>({axis:"x",duration:250})),o(d,R)};T(S,d=>{m()&&d(ee)})}o(y,v),me(),P()}Fe(["click","change","input"]);var Ns=D('<span class="connection-error svelte-12qhfyh"><!> Error</span>'),Ls=D('<div class="app svelte-12qhfyh"><header class="app-header svelte-12qhfyh"><div class="header-left svelte-12qhfyh"><button class="btn btn-ghost btn-icon" aria-label="Open menu"><!></button> <h1 class="app-title svelte-12qhfyh">Ambient Listener</h1></div> <div class="header-right svelte-12qhfyh"><!> <!></div></header> <main class="app-main svelte-12qhfyh"><!></main> <!></div>');function Ks(y,I){he(I,!0);const a=()=>b(Is,"$connectionError",i),[i,m]=je();rs(()=>{ws()});function u(){ge.update(v=>!v)}var $=Ls(),l=e($),P=e(l),p=e(P);p.__click=u;var F=e(p);W(F,{name:"menu",size:20}),s(p),fe(2),s(P);var E=t(P,2),M=e(E);{var O=v=>{var S=Ns(),ee=e(S);W(ee,{name:"alert",size:16}),fe(),s(S),H(()=>ks(S,"title",a())),o(v,S)};T(M,v=>{a()&&v(O)})}var z=t(M,2);ys(z,{}),s(E),s(l);var k=t(l,2),q=e(k);qs(q,()=>I.children),s(k);var c=t(k,2);Bs(c,{}),s($),o(y,$),me(),m()}Fe(["click"]);export{Ks as component};
