import{d as oe,a as d,f,s as j,c as Qe,e as ee}from"../chunks/Dcw-4Js5.js";import{B as Ie,p as ae,a as Le,t as R,m as se,T as v,n as s,s as i,a8 as J,o as t,g as e,a9 as q,k as Ve,a4 as We,aN as Ce,aa as je}from"../chunks/ocTC9fog.js";import{s as he,a as V,i as G,p as Ye}from"../chunks/CeYpcBse.js";import{y as Ze,I as W,n as fe,z as _e,A as te,o as Te,s as Y,B as et,C as Ue,D as tt,a as at,t as le,f as pe,x as ge,E as st,h as Se,F as nt,G as rt,H as it,J as lt,K as ot,r as vt,p as dt,q as ct,L as ut,M as _t}from"../chunks/RXd-l4Mu.js";import{i as pt}from"../chunks/BzpGigox.js";import{b as ft}from"../chunks/Bb87sCMO.js";function gt(P,o,a,D){var $=P.__style;if(Ie||$!==o){var b=Ze(o);(!Ie||b!==P.getAttribute("style"))&&(b==null?P.removeAttribute("style"):P.style.cssText=b),P.__style=o}return D}var ht=f('<span class="entry-dot svelte-112n2zp"></span>'),mt=f('<button><span class="date-label"> </span> <!></button>'),bt=f('<div class="timeline svelte-112n2zp"><button class="nav-btn svelte-112n2zp" aria-label="Previous week"><!></button> <div class="dates svelte-112n2zp"></div> <button class="nav-btn svelte-112n2zp" aria-label="Next week"><!></button> <div class="current-time svelte-112n2zp"><!> <span> </span></div></div>');function yt(P,o){ae(o,!0);const a=()=>V(_e,"$selectedDate",$),D=()=>V(et,"$availableDates",$),[$,b]=he();let h=q(()=>{const u=new Date(a()),n=[];for(let l=-3;l<=3;l++){const r=new Date(u);r.setDate(r.getDate()+l),n.push(r.toISOString().split("T")[0])}return n}),c=J("");function I(){v(c,new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),!0)}Le(()=>{I();const u=setInterval(I,1e3);return()=>clearInterval(u)});function S(u){return new Date(u+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function y(u){return u===new Date().toISOString().split("T")[0]}function E(u){const n=new Date(a());n.setDate(n.getDate()+u),_e.set(n.toISOString().split("T")[0]),te.set(null)}function U(u){_e.set(u),te.set(null)}function z(u){return D().includes(u)}var L=bt(),w=s(L);w.__click=()=>E(-7);var A=s(w);W(A,{name:"chevron-left",size:18}),t(w);var M=i(w,2);fe(M,21,()=>e(h),Te,(u,n)=>{var l=mt();let r;l.__click=()=>U(e(n));var g=s(l),O=s(g,!0);t(g);var X=i(g,2);{var m=_=>{var F=ht();d(_,F)};G(X,_=>{z(e(n))&&_(m)})}t(l),R((_,F)=>{r=Y(l,1,"date-btn svelte-112n2zp",null,r,_),j(O,F)},[()=>({selected:e(n)===a(),today:y(e(n)),"has-entries":z(e(n))}),()=>S(e(n))]),d(u,l)}),t(M);var C=i(M,2);C.__click=()=>E(7);var H=s(C);W(H,{name:"chevron-right",size:18}),t(C);var T=i(C,2),x=s(T);W(x,{name:"clock",size:14});var K=i(x,2),B=s(K,!0);t(K),t(T),t(L),R(()=>j(B,e(c))),d(P,L),se(),b()}oe(["click"]);var kt=f('<span class="reviewed-badge svelte-ie22u" title="Reviewed"><!></span>'),wt=f('<span class="speaker svelte-ie22u"><!> </span>'),xt=f("<span> </span>"),Dt=f('<button><div class="time-col svelte-ie22u"><span class="time svelte-ie22u"> </span> <!></div> <div class="content-col svelte-ie22u"><p> </p> <div class="meta svelte-ie22u"><!> <span class="duration svelte-ie22u"> </span> <!></div></div></button>');function St(P,o){ae(o,!0);let a=Ye(o,"selected",3,!1),D=q(()=>Ue(o.entry.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),$=q(()=>{const n=o.entry.durationMs/1e3;return n>=60?`${Math.floor(n/60)}m ${Math.round(n%60)}s`:`${n.toFixed(1)}s`}),b=q(()=>o.entry.confidence!==null&&o.entry.confidence!==void 0?Math.round(o.entry.confidence*100):null),h=q(()=>{const n=o.entry.transcript||"(No transcript)";return n.length>100?n.slice(0,100)+"...":n});var c=Dt();let I;c.__click=function(...n){var l;(l=o.onclick)==null||l.apply(this,n)};var S=s(c),y=s(S),E=s(y,!0);t(y);var U=i(y,2);{var z=n=>{var l=kt(),r=s(l);W(r,{name:"check",size:12}),t(l),d(n,l)};G(U,n=>{o.entry.reviewed&&n(z)})}t(S);var L=i(S,2),w=s(L);let A;var M=s(w,!0);t(w);var C=i(w,2),H=s(C);{var T=n=>{var l=wt(),r=s(l);W(r,{name:"user",size:12});var g=i(r);t(l),R(()=>j(g,` ${o.entry.speaker??""}`)),d(n,l)};G(H,n=>{o.entry.speaker&&n(T)})}var x=i(H,2),K=s(x,!0);t(x);var B=i(x,2);{var u=n=>{var l=xt();let r;var g=s(l);t(l),R(()=>{r=Y(l,1,"confidence svelte-ie22u",null,r,{low:e(b)<70,medium:e(b)>=70&&e(b)<90}),j(g,`${e(b)??""}%`)}),d(n,l)};G(B,n=>{e(b)!==null&&n(u)})}t(C),t(L),t(c),R(()=>{I=Y(c,1,"entry-card svelte-ie22u",null,I,{selected:a()}),j(E,e(D)),A=Y(w,1,"transcript svelte-ie22u",null,A,{empty:!o.entry.transcript}),j(M,e(h)),j(K,e($))}),d(P,c),se()}oe(["click"]);var Tt=f('<div class="empty-state svelte-1ue5fg0"><p class="svelte-1ue5fg0">Connecting to SpacetimeDB...</p></div>'),$t=f('<div class="empty-state svelte-1ue5fg0"><p class="svelte-1ue5fg0">No entries for this date</p> <span class="hint svelte-1ue5fg0">Entries will appear here when audio is captured</span></div>'),Et=f("<div><!></div>"),zt=f('<div class="entries svelte-1ue5fg0"></div>'),Mt=f('<div class="entry-list svelte-1ue5fg0"><header class="list-header svelte-1ue5fg0"><h2 class="date-title svelte-1ue5fg0"> </h2> <span class="count svelte-1ue5fg0"> </span></header> <div class="list-content svelte-1ue5fg0"><!></div></div>');function Nt(P,o){ae(o,!1);const a=()=>V(_e,"$selectedDate",h),D=()=>V(tt,"$entriesForDate",h),$=()=>V(at,"$isConnected",h),b=()=>V(te,"$selectedEntryId",h),[h,c]=he();function I(){return new Date(a()+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function S(T){te.set(T)}pt();var y=Mt(),E=s(y),U=s(E),z=s(U,!0);t(U);var L=i(U,2),w=s(L);t(L),t(E);var A=i(E,2),M=s(A);{var C=T=>{var x=Tt();le(3,x,()=>pe,()=>({duration:200})),d(T,x)},H=T=>{var x=Qe(),K=Ve(x);{var B=n=>{var l=$t();le(3,l,()=>pe,()=>({duration:200})),d(n,l)},u=n=>{var l=zt();fe(l,5,D,r=>r.id,(r,g)=>{var O=Et(),X=s(O);{let m=We(()=>b()===e(g).id);St(X,{get entry(){return e(g)},get selected(){return e(m)},onclick:()=>S(e(g).id)})}t(O),le(3,O,()=>pe,()=>({duration:150})),d(r,O)}),t(l),d(n,l)};G(K,n=>{D().length===0?n(B):n(u,!1)},!0)}d(T,x)};G(M,T=>{$()?T(H,!1):T(C)})}t(A),t(y),R(T=>{j(z,T),j(w,`${D().length??""} entries`)},[I]),d(P,y),se(),c()}var Pt=f('<audio preload="metadata"></audio>'),It=f('<div><!> <button class="play-btn svelte-j1l7g3"><!></button>  <div class="progress-container svelte-j1l7g3"><div class="progress-bar svelte-j1l7g3"><div class="progress-fill svelte-j1l7g3"></div></div></div> <div class="time-display svelte-j1l7g3"><span class="current svelte-j1l7g3"> </span> <span class="separator svelte-j1l7g3">/</span> <span class="total"> </span></div></div>');function Ct(P,o){ae(o,!0);let a=J(null),D=J(!1),$=J(0),b=J(null),h=q(()=>e(b)??o.durationMs/1e3);function c(m){if(m>=60){const _=Math.floor(m/60),F=Math.floor(m%60);return`${_}:${F.toString().padStart(2,"0")}`}return`${m.toFixed(1)}s`}let I=q(()=>e(h)>0?e($)/e(h)*100:0);function S(){e(a)&&(e(D)?e(a).pause():e(a).play())}function y(){e(a)&&v($,e(a).currentTime,!0)}function E(){e(a)&&!isNaN(e(a).duration)&&v(b,e(a).duration,!0)}function U(){v(D,!1),v($,0),e(a)&&(e(a).currentTime=0)}function z(){v(D,!0)}function L(){v(D,!1)}function w(m){if(!e(a))return;const F=m.currentTarget.getBoundingClientRect(),ne=(m.clientX-F.left)/F.width*e(h);e(a).currentTime=ne,v($,ne)}let A=q(()=>o.audioPath?`/audio/${o.audioPath}`:null);var M=It();let C;var H=s(M);{var T=m=>{var _=Pt();ft(_,F=>v(a,F),()=>e(a)),R(()=>ge(_,"src",e(A))),ee("timeupdate",_,y),ee("loadedmetadata",_,E),ee("ended",_,U),ee("play",_,z),ee("pause",_,L),d(m,_)};G(H,m=>{e(A)&&m(T)})}var x=i(H,2);x.__click=S;var K=s(x);{let m=q(()=>e(D)?"pause":"play");W(K,{get name(){return e(m)},size:16})}t(x);var B=i(x,2);B.__click=function(...m){var _;(_=o.audioPath?w:void 0)==null||_.apply(this,m)};var u=s(B),n=s(u);t(u),t(B);var l=i(B,2),r=s(l),g=s(r,!0);t(r);var O=i(r,4),X=s(O,!0);t(O),t(l),t(M),R((m,_)=>{C=Y(M,1,"audio-player svelte-j1l7g3",null,C,{disabled:!o.audioPath}),x.disabled=!o.audioPath,ge(x,"aria-label",e(D)?"Pause":"Play"),gt(n,`width: ${e(I)??""}%`),j(g,m),j(X,_)},[()=>c(e($)),()=>c(e(h))]),d(P,M),se()}oe(["click"]);var jt=f('<div class="empty-state svelte-1ig6rgh"><p>Select an entry to view details</p></div>'),Lt=f("<span> </span>"),Ut=f('<span class="badge badge-success"><!> Reviewed</span>'),At=f('<div class="new-speaker-form svelte-1ig6rgh"><input type="text" class="input svelte-1ig6rgh" placeholder="Enter speaker name"/> <button class="btn btn-primary btn-sm svelte-1ig6rgh">Add</button> <button class="btn btn-ghost btn-sm svelte-1ig6rgh">Cancel</button></div>'),Bt=f("<option> </option>"),Ft=f('<select id="speaker" class="select"><option>Not assigned</option><!><option>+ New speaker...</option></select>'),Rt=f("<option> </option>"),Ot=f('<div class="editor-content svelte-1ig6rgh"><header class="editor-header svelte-1ig6rgh"><div class="timestamp svelte-1ig6rgh"> </div> <div class="meta-badges svelte-1ig6rgh"><span class="badge badge-neutral"> </span> <!> <!></div></header> <div class="editor-section svelte-1ig6rgh"><label class="label" for="transcript">Transcript</label> <textarea id="transcript" class="textarea" placeholder="No transcript available"></textarea></div> <div class="editor-section svelte-1ig6rgh"><!></div> <div class="editor-row svelte-1ig6rgh"><div class="editor-section half svelte-1ig6rgh"><label class="label" for="speaker">Speaker</label> <!></div> <div class="editor-section half svelte-1ig6rgh"><label class="label" for="sentiment">Sentiment</label> <select id="sentiment" class="select"></select></div></div> <div class="editor-section svelte-1ig6rgh"><label class="label" for="notes">Notes</label> <textarea id="notes" class="textarea" placeholder="Add notes..."></textarea></div> <div class="divider"></div> <div class="editor-actions svelte-1ig6rgh"><button><!> </button> <button class="btn btn-danger svelte-1ig6rgh"><!> Delete</button></div></div>'),qt=f('<div class="entry-editor svelte-1ig6rgh"><!></div>');function Gt(P,o){ae(o,!0);const a=()=>V(st,"$selectedEntry",$),D=()=>V(_t,"$speakers",$),[$,b]=he();let h=J(""),c=J(""),I=J(""),S=J(""),y=J(""),E=J(!1);Le(()=>{a()&&(v(h,a().transcript??"",!0),v(c,a().speaker??"",!0),v(I,a().sentiment??"",!0),v(S,a().notes??"",!0))});let U=q(()=>a()?Ue(a().timestamp).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):""),z=q(()=>{var r;return(r=a())!=null&&r.confidence?Math.round(a().confidence*100):null}),L=q(()=>{if(!a())return"0s";const r=a().durationMs/1e3;return r>=60?`${Math.floor(r/60)}m ${Math.round(r%60)}s`:`${r.toFixed(1)}s`});function w(){a()&&it(a().id,{transcript:e(h)||void 0,speaker:e(c)||void 0,sentiment:e(I)||void 0,notes:e(S)||void 0})}function A(){a()&&lt(a().id,!a().reviewed)}function M(){a()&&confirm("Are you sure you want to delete this entry?")&&(ot(a().id),te.set(null))}function C(){e(y).trim()&&(ut(e(y).trim()),v(c,e(y).trim(),!0),v(y,""),v(E,!1),w())}function H(r){const g=r.target;g.value==="__new__"?(v(E,!0),v(c,"")):(v(c,g.value,!0),v(E,!1),w())}function T(){a()&&e(h)!==(a().transcript??"")&&w()}function x(){a()&&e(S)!==(a().notes??"")&&w()}const K=[{value:"",label:"Not set"},{value:"positive",label:"Positive"},{value:"neutral",label:"Neutral"},{value:"negative",label:"Negative"}];var B=qt(),u=s(B);{var n=r=>{var g=jt();le(3,g,()=>pe,()=>({duration:200})),d(r,g)},l=r=>{var g=Ot(),O=s(g),X=s(O),m=s(X,!0);t(X);var _=i(X,2),F=s(_),$e=s(F,!0);t(F);var ne=i(F,2);{var Ae=k=>{var p=Lt();let N;var Q=s(p);t(p),R(()=>{N=Y(p,1,"badge",null,N,{"badge-success":e(z)>=90,"badge-warning":e(z)>=70&&e(z)<90,"badge-danger":e(z)<70}),j(Q,`${e(z)??""}% confidence`)}),d(k,p)};G(ne,k=>{e(z)!==null&&k(Ae)})}var Be=i(ne,2);{var Fe=k=>{var p=Ut(),N=s(p);W(N,{name:"check",size:12}),je(),t(p),d(k,p)};G(Be,k=>{a().reviewed&&k(Fe)})}t(_),t(O);var me=i(O,2),ve=i(s(me),2);Ce(ve),ge(ve,"rows",4),t(me);var be=i(me,2),Re=s(be);Ct(Re,{get audioPath(){return a().audioClipPath},get durationMs(){return a().durationMs}}),t(be);var ye=i(be,2),ke=s(ye),Oe=i(s(ke),2);{var qe=k=>{var p=At(),N=s(p);vt(N);var Q=i(N,2);Q.__click=C;var Z=i(Q,2);Z.__click=()=>{v(E,!1),v(y,"")},t(p),Se(N,()=>e(y),ue=>v(y,ue)),d(k,p)},Ge=k=>{var p=Ft();p.__change=H;var N=s(p);N.value=N.__value="";var Q=i(N);fe(Q,1,D,Te,(Ke,De)=>{var ie=Bt(),Xe=s(ie,!0);t(ie);var Pe={};R(()=>{j(Xe,e(De).name),Pe!==(Pe=e(De).name)&&(ie.value=(ie.__value=e(De).name)??"")}),d(Ke,ie)});var Z=i(Q);Z.value=Z.__value="__new__",t(p);var ue;dt(p),R(()=>{ue!==(ue=e(c))&&(p.value=(p.__value=e(c))??"",ct(p,e(c)))}),d(k,p)};G(Oe,k=>{e(E)?k(qe):k(Ge,!1)})}t(ke);var Ee=i(ke,2),de=i(s(Ee),2);de.__change=w,fe(de,21,()=>K,Te,(k,p)=>{var N=Rt(),Q=s(N,!0);t(N);var Z={};R(()=>{j(Q,e(p).label),Z!==(Z=e(p).value)&&(N.value=(N.__value=e(p).value)??"")}),d(k,N)}),t(de),t(Ee),t(ye);var we=i(ye,2),ce=i(s(we),2);Ce(ce),ge(ce,"rows",2),t(we);var ze=i(we,4),re=s(ze);let Me;re.__click=A;var Ne=s(re);W(Ne,{name:"check",size:16});var He=i(Ne);t(re);var xe=i(re,2);xe.__click=M;var Je=s(xe);W(Je,{name:"trash",size:16}),je(),t(xe),t(ze),t(g),R(()=>{j(m,e(U)),j($e,e(L)),Me=Y(re,1,"btn svelte-1ig6rgh",null,Me,{"btn-secondary":a().reviewed,"btn-primary":!a().reviewed}),j(He,` ${a().reviewed?"Unmark Reviewed":"Mark Reviewed"}`)}),ee("blur",ve,T),Se(ve,()=>e(h),k=>v(h,k)),nt(de,()=>e(I),k=>v(I,k)),ee("blur",ce,x),Se(ce,()=>e(S),k=>v(S,k)),le(3,g,()=>rt,()=>({x:20,duration:200})),d(r,g)};G(u,r=>{a()?r(l,!1):r(n)})}t(B),d(P,B),se(),b()}oe(["click","change"]);var Ht=f('<button class="back-btn mobile-only svelte-1uha8ag">Back to list</button>'),Jt=f('<div class="page svelte-1uha8ag"><!> <div class="content svelte-1uha8ag"><div><!></div> <div><!> <!></div></div></div>');function Zt(P,o){ae(o,!0);const a=()=>V(te,"$selectedEntryId",D),[D,$]=he();let b=q(()=>a()!==null);var h=Jt(),c=s(h);yt(c,{});var I=i(c,2),S=s(I);let y;var E=s(S);Nt(E,{}),t(S);var U=i(S,2);let z;var L=s(U);{var w=M=>{var C=Ht();C.__click=()=>te.set(null),d(M,C)};G(L,M=>{e(b)&&M(w)})}var A=i(L,2);Gt(A,{}),t(U),t(I),t(h),R(()=>{y=Y(S,1,"list-panel svelte-1uha8ag",null,y,{"hidden-mobile":e(b)}),z=Y(U,1,"editor-panel svelte-1uha8ag",null,z,{"hidden-mobile":!e(b)})}),d(P,h),se(),$()}oe(["click"]);export{Zt as component};
